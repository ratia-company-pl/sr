<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2åº—èˆ—åˆç®—PLé€šå¸¸ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0fdfa;
            color: #1e293b;
            line-height: 1.6;
        }
        
        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .app-header {
            background: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 16px rgba(20, 184, 166, 0.2);
        }
        
        .app-title {
            font-size: 26px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .app-subtitle {
            font-size: 15px;
            opacity: 0.9;
        }
        
        .top-section {
            background: white;
            padding: 15px 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            border: 1px solid #99f6e4;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }
        
        .section-title {
            font-size: 16px;
            font-weight: 700;
            color: #0f766e;
            margin-bottom: 10px;
        }
        
        .store-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .store-table th {
            background: #ccfbf1;
            padding: 6px 8px;
            text-align: center;
            font-weight: 600;
            color: #0f766e;
            border: 1px solid #5eead4;
            font-size: 11px;
        }
        
        .store-table td {
            padding: 8px;
            text-align: center;
            border: 1px solid #99f6e4;
            font-size: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .store-table td:hover {
            background: #ccfbf1;
        }
        
        .store-table td.selected {
            background: #99f6e4;
            font-weight: 600;
        }
        
        .selection-status {
            margin-top: 10px;
            padding: 8px;
            background: #ccfbf1;
            border-radius: 6px;
            font-size: 12px;
            color: #0f766e;
            text-align: center;
            font-weight: 600;
        }
        
        .input-wrapper {
            display: grid;
            grid-template-columns: 1fr 180px;
            gap: 15px;
            align-items: end;
        }
        
        .input-label {
            font-weight: 600;
            color: #0f766e;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .input-field {
            padding: 10px 14px;
            border: 2px solid #5eead4;
            border-radius: 8px;
            font-size: 15px;
            width: 100%;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #14b8a6;
            box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);
        }
        
        .execute-button {
            background: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .execute-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(20, 184, 166, 0.3);
        }
        
        .execute-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .kpi-section {
            margin-bottom: 15px;
            display: none;
            gap: 20px;
        }
        
        .kpi-section.active {
            display: flex;
        }
        
        .kpi-box {
            flex: 1;
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            padding: 12px 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .kpi-label {
            font-size: 13px;
            color: white;
            font-weight: 600;
            margin-bottom: 6px;
        }
        
        .kpi-value {
            font-size: 24px;
            font-weight: 700;
            color: white;
            font-family: 'Courier New', monospace;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 500px 1fr;
            gap: 20px;
        }
        
        .pl-section {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            border: 1px solid #99f6e4;
            overflow: hidden;
            height: fit-content;
        }
        
        .pl-header {
            background: linear-gradient(135deg, #0f766e 0%, #0d9488 100%);
            color: white;
            padding: 12px 15px;
            font-size: 16px;
            font-weight: 700;
        }
        
        .pl-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 11px;
        }
        
        .pl-table th {
            background: #ccfbf1;
            padding: 4px 8px;
            text-align: left;
            font-weight: 600;
            color: #0f766e;
            border: 1px solid #5eead4;
            font-size: 10px;
        }
        
        .pl-table td {
            padding: 3px 8px;
            border: 1px solid #99f6e4;
        }
        
        .pl-amount {
            font-family: 'Courier New', monospace;
            font-weight: 600;
            text-align: right;
        }
        
        .pl-positive { color: #14b8a6; }
        .pl-negative { color: #dc2626; }
        
        .pl-highlight {
            background: #fef3c7 !important;
            font-weight: 700;
        }
        
        .pl-category {
            background: #99f6e4 !important;
            font-weight: 700;
            color: #0f766e;
        }
        
        .salary-section {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            border: 1px solid #99f6e4;
            overflow: hidden;
        }
        
        .salary-header {
            background: linear-gradient(135deg, #0f766e 0%, #0d9488 100%);
            color: white;
            padding: 12px 15px;
            font-size: 16px;
            font-weight: 700;
        }
        
        .salary-content {
            padding: 15px;
        }
        
        .stores-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .store-block {
            border: 1px solid #99f6e4;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .store-block-header {
            background: linear-gradient(135deg, #0f766e 0%, #0d9488 100%);
            color: white;
            padding: 8px 12px;
            font-weight: 700;
            font-size: 14px;
        }
        
        .store-summary {
            background: #ccfbf1;
            border: 2px solid #5eead4;
            border-radius: 8px;
            padding: 12px;
            margin: 12px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-rows: auto auto;
            gap: 8px 8px;
        }
        
        .summary-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .summary-label {
            font-size: 10px;
            color: #0f766e;
            font-weight: 600;
            white-space: nowrap;
        }
        
        .summary-value {
            font-size: 13px;
            font-weight: 700;
            color: #1e293b;
            font-family: 'Courier New', monospace;
        }
        
        .summary-value.emphasis {
            color: #14b8a6;
        }
        
        .summary-unit {
            font-size: 9px;
            font-weight: 600;
        }
        
        .staff-cards {
            max-height: 680px;
            overflow-y: auto;
            padding: 0 12px 12px 12px;
        }
        
        .staff-card {
            border: 1px solid #99f6e4;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 6px;
        }
        
        .staff-header {
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
            color: white;
            padding: 6px 10px;
            display: flex;
            justify-content: space-between;
        }
        
        .staff-name {
            font-weight: 700;
            font-size: 11px;
        }
        
        .staff-position {
            font-size: 9px;
            opacity: 0.9;
        }
        
        .staff-sales {
            font-size: 9px;
            text-align: right;
        }
        
        .salary-grid {
            padding: 8px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 4px;
        }
        
        .salary-item {
            display: flex;
            justify-content: space-between;
            padding: 3px 5px;
            background: #ccfbf1;
            border-radius: 3px;
            font-size: 9px;
        }
        
        .salary-label {
            color: #0f766e;
            font-weight: 500;
        }
        
        .salary-value {
            font-family: 'Courier New', monospace;
            font-weight: 600;
            color: #0d9488;
        }
        
        .salary-total {
            background: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%);
            color: white;
            grid-column: 1 / -1;
        }
        
        .salary-total .salary-label,
        .salary-total .salary-value {
            color: white;
        }
        
        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .stores-container {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .top-section {
                grid-template-columns: 1fr;
            }
            
            .kpi-section {
                flex-direction: column;
            }
            
            .input-wrapper {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="app-header">
            <div style="background: white; padding: 10px; border-radius: 8px; margin-bottom: 15px; text-align: center;">
                <button onclick="location.href='index.html'" style="padding: 8px 16px; background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%); color: white; border: none; border-radius: 6px; font-size: 13px; font-weight: 600; cursor: pointer;">ğŸ  ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹</button>
            </div>

            <div class="app-title">2åº—èˆ—åˆç®—PLé€šå¸¸ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</div>
            <div class="app-subtitle">2åº—èˆ—ã®æƒ³å®šå£²ä¸Šã‹ã‚‰åˆç®—æç›Šã¨å€‹äººåˆ¥çµ¦ä¸ã‚’ç®—å‡º</div>
        </div>
        
        <div class="top-section">
            <div>
                <div class="section-title">ğŸ¢ 2åº—èˆ—é¸æŠ(ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹)</div>
                <table class="store-table">
                    <thead>
                        <tr>
                            <th>æ¸…æ°´åº—</th>
                            <th>é™å²¡åº—</th>
                            <th>æ›å·åº—</th>
                            <th>å¸‚é‡åº—</th>
                            <th>ä½é³´å°åº—</th>
                            <th>åºƒå³¶åº—</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td onclick="toggleStore('shimizu', event)">
                                <input type="checkbox" id="shimizu" value="shimizu">
                                æ¸…æ°´åº—
                            </td>
                            <td onclick="toggleStore('shizuoka', event)">
                                <input type="checkbox" id="shizuoka" value="shizuoka">
                                é™å²¡åº—
                            </td>
                            <td onclick="toggleStore('kakegawa', event)">
                                <input type="checkbox" id="kakegawa" value="kakegawa">
                                æ›å·åº—
                            </td>
                            <td onclick="toggleStore('ichino', event)">
                                <input type="checkbox" id="ichino" value="ichino">
                                å¸‚é‡åº—
                            </td>
                            <td onclick="toggleStore('sanaru', event)">
                                <input type="checkbox" id="sanaru" value="sanaru">
                                ä½é³´å°åº—
                            </td>
                            <td onclick="toggleStore('hiroshima', event)">
                                <input type="checkbox" id="hiroshima" value="hiroshima">
                                åºƒå³¶åº—
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="selection-status" id="status">æœªé¸æŠï½œ2åº—èˆ—ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
            </div>
            
            <div>
                <div class="section-title">ğŸ“ˆ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š</div>
                <div class="input-wrapper">
                    <div>
                        <div class="input-label">åˆç®—æƒ³å®šå£²ä¸Š(ä¸‡å††)</div>
                        <input type="number" class="input-field" id="targetSales" placeholder="ä¾‹: 1500">
                    </div>
                    <button class="execute-button" id="executeBtn" disabled onclick="execute()">è¨ˆç®—å®Ÿè¡Œ</button>
                </div>
            </div>
        </div>
        
        <div class="kpi-section" id="kpiSection">
            <div class="kpi-box">
                <div class="kpi-label">åˆç®—åº—èˆ—å†…å®Ÿç¸¾</div>
                <div class="kpi-value" id="kpi1">-</div>
            </div>
            <div class="kpi-box">
                <div class="kpi-label">åˆç®—å®šæœŸè³¼å…¥é¡</div>
                <div class="kpi-value" id="kpi2">-</div>
            </div>
            <div class="kpi-box">
                <div class="kpi-label">åˆç®—æƒ³å®šé”æˆç‡</div>
                <div class="kpi-value" id="kpi3">-</div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="pl-section">
                <div class="pl-header">ğŸ“Š åˆç®—æç›Šè¨ˆç®—æ›¸(PL)</div>
                <table class="pl-table" id="plTable">
                    <tbody>
                        <tr class="pl-category"><td colspan="2">å£²ä¸Š</td></tr>
                        <tr><td>å£²ä¸Šé«˜</td><td class="pl-amount" id="pl-sales">-</td></tr>
                        <tr><td>â”œ åº—èˆ—å†…å®Ÿç¸¾</td><td class="pl-amount" id="pl-in-store">-</td></tr>
                        <tr><td>â”” å®šæœŸè³¼å…¥</td><td class="pl-amount" id="pl-periodic">-</td></tr>
                        <tr class="pl-category"><td colspan="2">å¤‰å‹•è²»</td></tr>
                        <tr><td>ä»•å…¥</td><td class="pl-amount pl-negative" id="pl-purchase">-</td></tr>
                        <tr><td>æ”¯æ‰•æ‰‹æ•°æ–™</td><td class="pl-amount pl-negative" id="pl-fee">-</td></tr>
                        <tr class="pl-highlight"><td>å£²ä¸Šç·åˆ©ç›Š</td><td class="pl-amount pl-positive" id="pl-gross">-</td></tr>
                        <tr class="pl-category"><td colspan="2">è²©å£²ç®¡ç†è²»</td></tr>
                        <tr><td>çµ¦æ–™æ‰‹å½“</td><td class="pl-amount pl-negative" id="pl-salary">-</td></tr>
                        <tr><td>â”œ åŸºæœ¬çµ¦ä¸</td><td class="pl-amount" id="pl-basic">-</td></tr>
                        <tr><td>â”œ åº—èˆ—å£²ä¸Šæ‰‹å½“</td><td class="pl-amount" id="pl-store-allowance">-</td></tr>
                        <tr><td>â”œ é”æˆåº—èˆ—æ‰‹å½“</td><td class="pl-amount" id="pl-achievement-allowance">-</td></tr>
                        <tr><td>â”” å€‹äººå®Ÿç¸¾æ‰‹å½“</td><td class="pl-amount" id="pl-personal-allowance">-</td></tr>
                        <tr><td>é›‘çµ¦</td><td class="pl-amount pl-negative" id="pl-parttime">-</td></tr>
                        <tr><td>PMå ±é…¬</td><td class="pl-amount pl-negative" id="pl-pm">-</td></tr>
                        <tr><td>æ³•å®šç¦åˆ©è²»</td><td class="pl-amount pl-negative" id="pl-welfare">-</td></tr>
                        <tr><td>ç‰©æµç®¡ç†è²»</td><td class="pl-amount pl-negative" id="pl-logistics">-</td></tr>
                        <tr><td>å¤–æ³¨è²»</td><td class="pl-amount pl-negative" id="pl-outsource">-</td></tr>
                        <tr><td>è·é€ é‹è³ƒ</td><td class="pl-amount pl-negative" id="pl-shipping">-</td></tr>
                        <tr><td>åºƒå‘Šå®£ä¼è²»</td><td class="pl-amount pl-negative" id="pl-advertising">-</td></tr>
                        <tr><td>è²©å£²ä¿ƒé€²è²»</td><td class="pl-amount pl-negative" id="pl-promotion">-</td></tr>
                        <tr><td>è¡›ç”Ÿè²»</td><td class="pl-amount pl-negative" id="pl-hygiene">-</td></tr>
                        <tr><td>åœ°ä»£å®¶è³ƒ</td><td class="pl-amount pl-negative" id="pl-rent">-</td></tr>
                        <tr><td>æ—…è²»äº¤é€šè²»</td><td class="pl-amount pl-negative" id="pl-travel">-</td></tr>
                        <tr><td>é€šä¿¡è²»</td><td class="pl-amount pl-negative" id="pl-communication">-</td></tr>
                        <tr><td>æ¶ˆè€—å“è²»</td><td class="pl-amount pl-negative" id="pl-supplies">-</td></tr>
                        <tr><td>äº‹å‹™ç”¨å“è²»</td><td class="pl-amount pl-negative" id="pl-office">-</td></tr>
                        <tr><td>ãƒªãƒ¼ã‚¹æ–™</td><td class="pl-amount pl-negative" id="pl-lease">-</td></tr>
                        <tr><td>ä¿é™ºæ–™</td><td class="pl-amount pl-negative" id="pl-insurance">-</td></tr>
                        <tr><td>æ°´é“å…‰ç†±è²»</td><td class="pl-amount pl-negative" id="pl-utility">-</td></tr>
                        <tr><td>æ”¯æ‰•å ±é…¬æ–™</td><td class="pl-amount pl-negative" id="pl-consulting">-</td></tr>
                        <tr><td>æ¸›ä¾¡å„Ÿå´è²»</td><td class="pl-amount pl-negative" id="pl-depreciation">-</td></tr>
                        <tr><td>ç®¡ç†è«¸è²»</td><td class="pl-amount pl-negative" id="pl-management">-</td></tr>
                        <tr class="pl-highlight"><td>å–¶æ¥­åˆ©ç›Š</td><td class="pl-amount pl-positive" id="pl-profit">-</td></tr>
                    </tbody>
                </table>
            </div>
            
            <div class="salary-section">
                <div class="salary-header">ğŸ‘¥ 2åº—èˆ—åˆ¥ã‚¹ã‚¿ãƒƒãƒ•çµ¦ä¸è©³ç´°</div>
                <div class="salary-content">
                    <div class="stores-container" id="storesContainer">
                        <div style="text-align: center; padding: 40px; color: #6b7280; grid-column: 1 / -1;">
                            <div style="font-size: 48px;">ğŸ¢</div>
                            <div style="font-size: 16px; font-weight: 600;">2åº—èˆ—ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedStores = [];
        
        // å½¹è·ã®é †åºå®šç¾©
        const positionOrder = {
            'MD': 1,
            'EM': 2,
            'M': 3,
            'SM': 4,
            'C': 5,
            'SC': 6,
            'A': 7,
            'SA': 8
        };
        
        // åº—èˆ—ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿
        const storeData = {
            shimizu: {
                name: "æ¸…æ°´åº—",
                responsibility: 6300000,
                periodicSales: 1218900,
                fixedCosts: {
                    parttime: 110000,
                    pm: 40000,
                    hygiene: 20000,
                    rent: 330000,
                    travel: 40000,
                    communication: 20000,
                    supplies: 20000,
                    office: 10000,
                    utility: 60000,
                    management: 30000
                },
                staff: [
                    {name: "ä½è—¤æ„›", position: "MD", currentSales: 452229},
                    {name: "æ¤ç”°å‡ªå’²", position: "SM", currentSales: 1192714},
                    {name: "å¤æœ¨å½©é¦™", position: "C", currentSales: 672560},
                    {name: "å±±å£ç´”åŠ ", position: "A", currentSales: 255627}
                ]
            },
            shizuoka: {
                name: "é™å²¡åº—",
                responsibility: 4400000,
                periodicSales: 1741000,
                fixedCosts: {
                    parttime: 40000,
                    pm: 30000,
                    hygiene: 20000,
                    rent: 290000,
                    travel: 30000,
                    communication: 20000,
                    supplies: 20000,
                    office: 10000,
                    utility: 70000,
                    management: 30000
                },
                staff: [
                    {name: "æ—©å·ä»ç¾", position: "MD", currentSales: 986105},
                    {name: "æ¹¯å°¾ã‚ã‹ã‚Š", position: "MD", currentSales: 585977}
                ]
            },
            kakegawa: {
                name: "æ›å·åº—",
                responsibility: 7250000,
                periodicSales: 900000,
                fixedCosts: {
                    parttime: 160000,
                    pm: 30000,
                    hygiene: 30000,
                    rent: 360000,
                    travel: 60000,
                    communication: 10000,
                    supplies: 20000,
                    office: 20000,
                    utility: 120000,
                    management: 30000
                },
                staff: [
                    {name: "æµ·é‡ç”±ä½³", position: "MD", currentSales: 1006301},
                    {name: "è¥¿æ‘èŠ½ä¹…ç¾", position: "SM", currentSales: 729770},
                    {name: "è‰¯çŸ¥ç¾å’²", position: "SM", currentSales: 190842},
                    {name: "å®ˆå±‹ç¹­", position: "C", currentSales: 991423},
                    {name: "æµ·é‡å®‰ç¾", position: "C", currentSales: 891877}
                ]
            },
            ichino: {
                name: "å¸‚é‡åº—",
                responsibility: 7300000,
                periodicSales: 685400,
                fixedCosts: {
                    parttime: 10000,
                    pm: 0,
                    hygiene: 30000,
                    rent: 200000,
                    travel: 40000,
                    communication: 30000,
                    supplies: 20000,
                    office: 10000,
                    utility: 70000,
                    management: 30000
                },
                staff: [
                    {name: "å¤§æ©‹äºœå­£", position: "EM", currentSales: 3423440},
                    {name: "ç”°ä¸­å¥ˆæ™º", position: "M", currentSales: 1388690},
                    {name: "ç”°ä¸­è‰å¤®", position: "MD", currentSales: 476234},
                    {name: "è¶³ç«‹è£•ç¾", position: "C", currentSales: 559634},
                    {name: "é•·å³¶å¶æ²™", position: "SC", currentSales: 787216}
                ]
            },
            sanaru: {
                name: "ä½é³´å°åº—",
                responsibility: 5230000,
                periodicSales: 1068900,
                fixedCosts: {
                    parttime: 50000,
                    pm: 30000,
                    hygiene: 10000,
                    rent: 220000,
                    travel: 40000,
                    communication: 20000,
                    supplies: 20000,
                    office: 10000,
                    utility: 50000,
                    management: 30000
                },
                staff: [
                    {name: "å¤ªç”°é¦™", position: "MD", currentSales: 393755},
                    {name: "æ‘æœ¨å’²è‰¯", position: "SM", currentSales: 1135208},
                    {name: "ä¸­äº•æ˜Ÿç‘ ä½³", position: "C", currentSales: 649474}
                ]
            },
            hiroshima: {
                name: "åºƒå³¶åº—",
                responsibility: 6080000,
                periodicSales: 1600000,
                fixedCosts: {
                    parttime: 50000,
                    pm: 40000,
                    hygiene: 10000,
                    rent: 460000,
                    travel: 90000,
                    communication: 30000,
                    supplies: 20000,
                    office: 20000,
                    utility: 60000,
                    management: 30000
                },
                staff: [
                    {name: "æµ…é‡æ™ºç¾", position: "MD", currentSales: 375707},
                    {name: "å¤§çŸ¢ç¾ç”±ç´€", position: "MD", currentSales: 1271088},
                    {name: "åœŸäº•é•·è¦³ç¾", position: "SC", currentSales: 499582},
                    {name: "æ²³å†…æµç¾", position: "A", currentSales: 422801}
                ]
            }
        };
        
        // å½¹è·åˆ¥åŸºæœ¬çµ¦
        const baseSalary = {
            MD: 350000,
            EM: 300000,
            M: 280000,
            SM: 270000,
            C: 260000,
            SC: 250000,
            A: 240000,
            SA: 230000
        };
        
        // å½¹è·åˆ¥å½¹è·çµ¦
        const roleAllowance = {
            MD: 0,
            EM: 0,
            M: 50000,
            SM: 40000,
            C: 30000,
            SC: 20000,
            A: 10000,
            SA: 0
        };
        
        // å…¨ç¤¾å…±é€šå›ºå®šè²»ï¼ˆ1åº—èˆ—ã‚ãŸã‚Šã®æœˆé¡ï¼‰
        const fixedCostPerStore = {
            logistics: 350000,
            outsource: 210000,
            shipping: 120000,
            advertising: 50000,
            promotion: 70000,
            lease: 10000,
            insurance: 10000,
            consulting: 60000,
            depreciation: 40000
        };
        
        // ã‚¹ã‚¿ãƒƒãƒ•ã‚’å½¹è·é †ã«ã‚½ãƒ¼ãƒˆ
        function sortStaffByPosition(staffArray) {
            return [...staffArray].sort((a, b) => {
                return (positionOrder[a.position] || 99) - (positionOrder[b.position] || 99);
            });
        }
        
        function toggleStore(storeId, e) {
            if (e.target.tagName === 'INPUT') return;
            const checkbox = document.getElementById(storeId);
            checkbox.checked = !checkbox.checked;
            updateSelection();
        }
        
        function updateSelection() {
            selectedStores = [];
            document.querySelectorAll('input[type="checkbox"]:checked').forEach(cb => {
                selectedStores.push(cb.value);
            });
            
            document.querySelectorAll('.store-table td').forEach(td => {
                const checkbox = td.querySelector('input');
                if (checkbox) {
                    if (selectedStores.length === 2 && !checkbox.checked) {
                        checkbox.disabled = true;
                        td.style.opacity = '0.5';
                    } else {
                        checkbox.disabled = false;
                        td.style.opacity = '1';
                    }
                    td.classList.toggle('selected', checkbox.checked);
                }
            });
            
            const status = document.getElementById('status');
            if (selectedStores.length === 0) {
                status.textContent = 'æœªé¸æŠï½œ2åº—èˆ—ã‚’é¸æŠã—ã¦ãã ã•ã„';
            } else if (selectedStores.length === 1) {
                status.textContent = `é¸æŠæ¸ˆã¿: ${storeData[selectedStores[0]].name}ï½œã‚ã¨1åº—èˆ—é¸æŠ`;
            } else {
                status.textContent = `é¸æŠæ¸ˆã¿: ${storeData[selectedStores[0]].name}ã€${storeData[selectedStores[1]].name}ï½œé¸æŠå®Œäº†`;
            }
            
            updateDisplay();
        }
        
        function updateDisplay() {
            const container = document.getElementById('storesContainer');
            
            if (selectedStores.length !== 2) {
                container.innerHTML = '<div style="text-align: center; padding: 40px; color: #6b7280; grid-column: 1 / -1;"><div style="font-size: 48px;">ğŸ¢</div><div style="font-size: 16px; font-weight: 600;">2åº—èˆ—ã‚’é¸æŠã—ã¦ãã ã•ã„</div></div>';
                document.getElementById('kpiSection').classList.remove('active');
                document.getElementById('executeBtn').disabled = true;
                return;
            }
            
            const stores = selectedStores.map(id => storeData[id]);
            const totalSales = stores.reduce((sum, s) => sum + s.staff.reduce((s2, st) => s2 + st.currentSales, 0), 0);
            const totalPeriodic = stores.reduce((sum, s) => sum + s.periodicSales, 0);
            const totalResponsibility = stores.reduce((sum, s) => sum + s.responsibility, 0);
            const currentRate = ((totalSales + totalPeriodic) / totalResponsibility * 100).toFixed(1);
            
            document.getElementById('kpi1').textContent = (totalSales/10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('kpi2').textContent = (totalPeriodic/10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('kpi3').textContent = currentRate + '%';
            document.getElementById('kpiSection').classList.add('active');
            
            container.innerHTML = stores.map(store => {
                const storeSales = store.staff.reduce((sum, s) => sum + s.currentSales, 0);
                const rate = ((storeSales + store.periodicSales) / store.responsibility * 100).toFixed(1);
                const sortedStaff = sortStaffByPosition(store.staff);
                
                return `
                    <div class="store-block">
                        <div class="store-block-header">${store.name}</div>
                        <div class="store-summary">
                            <div class="summary-item">
                                <span class="summary-label">è²¬ä»»é¡:</span>
                                <span class="summary-value emphasis">${(store.responsibility/10000).toFixed(0)}<span class="summary-unit">ä¸‡</span></span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">å®šæœŸè³¼å…¥:</span>
                                <span class="summary-value emphasis">${(store.periodicSales/10000).toFixed(1)}<span class="summary-unit">ä¸‡</span></span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">åº—èˆ—å®Ÿç¸¾:</span>
                                <span class="summary-value">${(storeSales/10000).toFixed(1)}<span class="summary-unit">ä¸‡</span></span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">ç¾åœ¨é”æˆç‡:</span>
                                <span class="summary-value" style="color: ${rate >= 100 ? '#059669' : '#dc2626'};">${rate}%</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">äººæ•°:</span>
                                <span class="summary-value">${store.staff.length}å</span>
                            </div>
                            <div class="summary-item"></div>
                        </div>
                        <div class="staff-cards">
                            ${sortedStaff.map(s => `
                                <div class="staff-card">
                                    <div class="staff-header">
                                        <div>
                                            <div class="staff-name">${s.name}</div>
                                            <div class="staff-position">${s.position}</div>
                                        </div>
                                        <div class="staff-sales">ç¾åœ¨: ${(s.currentSales/10000).toFixed(1)}ä¸‡å††</div>
                                    </div>
                                    <div class="salary-grid">
                                        <div class="salary-item"><span class="salary-label">ç¾åœ¨å®Ÿç¸¾</span><span class="salary-value">${(s.currentSales/10000).toFixed(1)}ä¸‡</span></div>
                                        <div class="salary-item"><span class="salary-label">åŸºæœ¬çµ¦</span><span class="salary-value">-</span></div>
                                        <div class="salary-item"><span class="salary-label">åº—èˆ—æ‰‹å½“</span><span class="salary-value">-</span></div>
                                        <div class="salary-item"><span class="salary-label">åŠ ç®—é¡</span><span class="salary-value">-</span></div>
                                        <div class="salary-item"><span class="salary-label">å½¹è·çµ¦</span><span class="salary-value">-</span></div>
                                        <div class="salary-item"><span class="salary-label">å€‹äººæ‰‹å½“</span><span class="salary-value">-</span></div>
                                        <div class="salary-item"><span class="salary-label">å€‹äººç›®æ¨™</span><span class="salary-value">-</span></div>
                                        <div class="salary-item"><span class="salary-label">é”æˆæ‰‹å½“</span><span class="salary-value">-</span></div>
                                        <div class="salary-item"><span class="salary-label">ãã®ä»–</span><span class="salary-value">-</span></div>
                                        <div class="salary-item salary-total"><span class="salary-label">æ”¯çµ¦åˆè¨ˆ</span><span class="salary-value">-</span></div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('executeBtn').disabled = false;
        }
        
        // MDçµ¦ä¸è¨ˆç®—é–¢æ•°
        function calculateMDSalary(achievementRate) {
            if (achievementRate < 82.5) return 250000;
            if (achievementRate < 82.9) return 260000;
            if (achievementRate < 85.8) return 270000;
            if (achievementRate < 88.6) return 280000;
            if (achievementRate < 91.5) return 290000;
            if (achievementRate < 94.3) return 300000;
            if (achievementRate < 97.2) return 310000;
            if (achievementRate < 100) return 320000;
            return 350000;
        }
        
        // åº—èˆ—å£²ä¸Šæ‰‹å½“è¨ˆç®—
        function calculateStoreSalesAllowance(position, storeSales, isAchieved) {
            if (position === 'MD') {
                return isAchieved ? storeSales * 0.012 : 0;
            } else if (position === 'EM' || position === 'M') {
                return isAchieved ? storeSales * 0.006 : storeSales * 0.003;
            }
            return 0;
        }
        
        // è²¬ä»»é¡é”æˆåº—èˆ—æ‰‹å½“è¨ˆç®—
        function calculateAchievementAllowance(achievementRate, staffCount) {
            if (achievementRate < 100) return 0;
            
            let totalAmount = 0;
            if (achievementRate >= 150) totalAmount = 290000;
            else if (achievementRate >= 140) totalAmount = 240000;
            else if (achievementRate >= 130) totalAmount = 190000;
            else if (achievementRate >= 120) totalAmount = 140000;
            else if (achievementRate >= 110) totalAmount = 100000;
            else totalAmount = 70000;
            
            return Math.floor(totalAmount / staffCount);
        }
        
        // å€‹äººå®Ÿç¸¾æ‰‹å½“è¨ˆç®—
        function calculatePersonalAllowance(position, personalSales, isAchieved) {
            if (position === 'MD') return 0;
            
            const personalSalesInMan = personalSales / 10000;
            let rate = 0;
            
            if (personalSalesInMan < 110) {
                rate = isAchieved ? 0.01 : 0.005;
            } else if (personalSalesInMan < 165) {
                rate = isAchieved ? 0.015 : 0.005;
            } else if (personalSalesInMan < 220) {
                rate = isAchieved ? 0.03 : 0.02;
            } else if (personalSalesInMan < 330) {
                rate = isAchieved ? 0.04 : 0.03;
            } else if (personalSalesInMan < 440) {
                rate = isAchieved ? 0.05 : 0.04;
            } else {
                rate = isAchieved ? 0.06 : 0.05;
            }
            
            return Math.floor(personalSales * rate);
        }
        
        function execute() {
            if (selectedStores.length !== 2) return;
            
            const targetSalesMan = parseFloat(document.getElementById('targetSales').value);
            if (!targetSalesMan || targetSalesMan <= 0) return;
            
            const targetSales = targetSalesMan * 10000;
            const stores = selectedStores.map(id => storeData[id]);
            
            // åˆç®—è¨ˆç®—
            const totalCurrentSales = stores.reduce((sum, s) => sum + s.staff.reduce((s2, st) => s2 + st.currentSales, 0), 0);
            const totalPeriodic = stores.reduce((sum, s) => sum + s.periodicSales, 0);
            const totalResponsibility = stores.reduce((sum, s) => sum + s.responsibility, 0);
            const inStoreSales = targetSales - totalPeriodic;
            const totalAchievementRate = (targetSales / totalResponsibility) * 100;
            const isAchieved = totalAchievementRate >= 100;
            
            // åº—èˆ—ã”ã¨ã®å£²ä¸Šé…åˆ†(è²¬ä»»é¡ã®æ¯”ç‡ã§é…åˆ†)
            const storeAllocations = stores.map(store => {
                const ratio = store.responsibility / totalResponsibility;
                return targetSales * ratio;
            });
            
            // PLè¨ˆç®—
            const pl = {
                sales: targetSales,
                inStoreSales: inStoreSales,
                periodicSales: totalPeriodic,
                purchase: Math.floor(targetSales * 0.272),
                fee: Math.floor(targetSales * 0.0353),
                gross: Math.floor(targetSales * 0.6927)
            };
            
            // äººä»¶è²»è¨ˆç®—
            let totalSalary = 0;
            let totalBasicSalary = 0;
            let totalStoreSalesAllowance = 0;
            let totalAchievementAllowance = 0;
            let totalPersonalAllowance = 0;
            let totalParttime = 0;
            let totalPM = 0;
            const allStaffSalaries = [];
            
            // å„åº—èˆ—ã®è¨ˆç®—
            stores.forEach((store, storeIndex) => {
                const storeTargetSales = storeAllocations[storeIndex];
                const storeCurrentSales = store.staff.reduce((sum, s) => sum + s.currentSales, 0);
                const storeInStoreSales = storeTargetSales - store.periodicSales;
                const storeIncrease = storeInStoreSales - storeCurrentSales;
                const storeAchievementRate = (storeTargetSales / store.responsibility) * 100;
                const storeIsAchieved = storeAchievementRate >= 100;
                
                totalParttime += store.fixedCosts.parttime;
                totalPM += store.fixedCosts.pm;
                
                const staffSalaries = [];
                store.staff.forEach(staff => {
                    const additionPerStaff = Math.floor(storeIncrease / store.staff.length);
                    const newPersonalSales = staff.currentSales + additionPerStaff;
                    let salary = 0;
                    
                    // åŸºæœ¬çµ¦(å½¹è·çµ¦å«ã‚€) - 2åº—èˆ—ã®å ´åˆã¯åˆç®—é”æˆç‡ã§åˆ¤å®š
                    if (staff.position === 'MD') {
                        salary = calculateMDSalary(totalAchievementRate);
                    } else {
                        salary = baseSalary[staff.position] + roleAllowance[staff.position];
                    }
                    
                    // åº—èˆ—å£²ä¸Šæ‰‹å½“(å„åº—èˆ—ã®å£²ä¸Šã§è¨ˆç®—)
                    const storeSalesAllowance = calculateStoreSalesAllowance(staff.position, storeTargetSales, storeIsAchieved);
                    
                    // è²¬ä»»é¡é”æˆåº—èˆ—æ‰‹å½“(å„åº—èˆ—ã®é”æˆç‡ã§è¨ˆç®—)
                    const achievementAllowance = calculateAchievementAllowance(storeAchievementRate, store.staff.length);
                    
                    // å€‹äººå®Ÿç¸¾æ‰‹å½“
                    const personalAllowance = calculatePersonalAllowance(staff.position, newPersonalSales, storeIsAchieved);
                    
                    const totalStaffSalary = salary + storeSalesAllowance + achievementAllowance + personalAllowance;
                    
                    staffSalaries.push({
                        name: staff.name,
                        position: staff.position,
                        currentSales: staff.currentSales,
                        increaseSales: additionPerStaff,
                        newSales: newPersonalSales,
                        baseSalary: salary,
                        storeSalesAllowance: storeSalesAllowance,
                        achievementAllowance: achievementAllowance,
                        personalAllowance: personalAllowance,
                        total: totalStaffSalary
                    });
                    
                    totalSalary += totalStaffSalary;
                    totalBasicSalary += salary;
                    totalStoreSalesAllowance += storeSalesAllowance;
                    totalAchievementAllowance += achievementAllowance;
                    totalPersonalAllowance += personalAllowance;
                });
                
                allStaffSalaries.push({
                    storeName: store.name,
                    storeAchievementRate: storeAchievementRate,
                    storeTargetSales: storeTargetSales,
                    staffSalaries: staffSalaries
                });
            });
            
            // æ³•å®šç¦åˆ©è²»
            pl.welfare = Math.floor((totalSalary + totalParttime + totalPM) * 0.13);
            
            // åº—èˆ—å›ºå®šè²»(2åº—èˆ—åˆ†åˆç®—)
            const totalHygiene = stores.reduce((sum, s) => sum + s.fixedCosts.hygiene, 0);
            const totalRent = stores.reduce((sum, s) => sum + s.fixedCosts.rent, 0);
            const totalTravel = stores.reduce((sum, s) => sum + s.fixedCosts.travel, 0);
            const totalCommunication = stores.reduce((sum, s) => sum + s.fixedCosts.communication, 0);
            const totalSupplies = stores.reduce((sum, s) => sum + s.fixedCosts.supplies, 0);
            const totalOffice = stores.reduce((sum, s) => sum + s.fixedCosts.office, 0);
            const totalUtility = stores.reduce((sum, s) => sum + s.fixedCosts.utility, 0);
            const totalManagement = stores.reduce((sum, s) => sum + s.fixedCosts.management, 0);
            
            const totalStoreFixed = totalHygiene + totalRent + totalTravel + totalCommunication + 
                                   totalSupplies + totalOffice + totalUtility + totalManagement;
            
            // å…¨ç¤¾å›ºå®šè²»(2åº—èˆ—åˆ†)
            const storeCount = stores.length;
            const totalCompanyFixed = Object.values(fixedCostPerStore).reduce((sum, val) => sum + val, 0) * storeCount;
            
            // å–¶æ¥­åˆ©ç›Šè¨ˆç®—
            const laborCost = totalSalary + totalParttime + totalPM + pl.welfare;
            pl.profit = pl.gross - laborCost - totalStoreFixed - totalCompanyFixed;
            
            // PLè¡¨ç¤ºæ›´æ–°
            document.getElementById('pl-sales').textContent = (pl.sales / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-in-store').textContent = (pl.inStoreSales / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-periodic').textContent = (pl.periodicSales / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-purchase').textContent = (pl.purchase / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-fee').textContent = (pl.fee / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-gross').textContent = (pl.gross / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-salary').textContent = (totalSalary / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-basic').textContent = (totalBasicSalary / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-store-allowance').textContent = (totalStoreSalesAllowance / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-achievement-allowance').textContent = (totalAchievementAllowance / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-personal-allowance').textContent = (totalPersonalAllowance / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-parttime').textContent = (totalParttime / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-pm').textContent = (totalPM / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-welfare').textContent = (pl.welfare / 10000).toFixed(1) + 'ä¸‡å††';
            
            // å…¨ç¤¾å›ºå®šè²»(2åº—èˆ—åˆ†)
            document.getElementById('pl-logistics').textContent = ((fixedCostPerStore.logistics * storeCount) / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-outsource').textContent = ((fixedCostPerStore.outsource * storeCount) / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-shipping').textContent = ((fixedCostPerStore.shipping * storeCount) / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-advertising').textContent = ((fixedCostPerStore.advertising * storeCount) / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-promotion').textContent = ((fixedCostPerStore.promotion * storeCount) / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-lease').textContent = ((fixedCostPerStore.lease * storeCount) / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-insurance').textContent = ((fixedCostPerStore.insurance * storeCount) / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-consulting').textContent = ((fixedCostPerStore.consulting * storeCount) / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-depreciation').textContent = ((fixedCostPerStore.depreciation * storeCount) / 10000).toFixed(1) + 'ä¸‡å††';
            
            // åº—èˆ—å›ºå®šè²»
            document.getElementById('pl-hygiene').textContent = (totalHygiene / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-rent').textContent = (totalRent / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-travel').textContent = (totalTravel / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-communication').textContent = (totalCommunication / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-supplies').textContent = (totalSupplies / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-office').textContent = (totalOffice / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-utility').textContent = (totalUtility / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-management').textContent = (totalManagement / 10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('pl-profit').textContent = (pl.profit / 10000).toFixed(1) + 'ä¸‡å††';
            
            // å–¶æ¥­åˆ©ç›Šã®è‰²å¤‰æ›´
            const profitElement = document.getElementById('pl-profit');
            if (pl.profit >= 0) {
                profitElement.className = 'pl-amount pl-positive';
            } else {
                profitElement.className = 'pl-amount pl-negative';
            }
            
            // KPIæ›´æ–°
            document.getElementById('kpi1').textContent = (inStoreSales/10000).toFixed(1) + 'ä¸‡å††';
            document.getElementById('kpi3').textContent = totalAchievementRate.toFixed(1) + '%';
            
            // ã‚¹ã‚¿ãƒƒãƒ•ã‚«ãƒ¼ãƒ‰æ›´æ–°(å½¹è·é †)
            const container = document.getElementById('storesContainer');
            container.innerHTML = allStaffSalaries.map(storeData => {
                const store = stores.find(s => s.name === storeData.storeName);
                const sortedSalaries = sortStaffByPosition(storeData.staffSalaries);
                
                return `
                    <div class="store-block">
                        <div class="store-block-header">${storeData.storeName}</div>
                        <div class="store-summary">
                            <div class="summary-item">
                                <span class="summary-label">è²¬ä»»é¡:</span>
                                <span class="summary-value emphasis">${(store.responsibility/10000).toFixed(0)}<span class="summary-unit">ä¸‡</span></span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">å®šæœŸè³¼å…¥:</span>
                                <span class="summary-value emphasis">${(store.periodicSales/10000).toFixed(1)}<span class="summary-unit">ä¸‡</span></span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">æƒ³å®šå£²ä¸Š:</span>
                                <span class="summary-value" style="color: #f97316;">${(storeData.storeTargetSales/10000).toFixed(1)}<span class="summary-unit">ä¸‡</span></span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">åº—èˆ—é”æˆç‡:</span>
                                <span class="summary-value" style="color: ${storeData.storeAchievementRate >= 100 ? '#059669' : '#dc2626'};">${storeData.storeAchievementRate.toFixed(1)}%</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">äººæ•°:</span>
                                <span class="summary-value">${store.staff.length}å</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">åˆç®—é”æˆç‡:</span>
                                <span class="summary-value" style="color: ${totalAchievementRate >= 100 ? '#059669' : '#dc2626'};">${totalAchievementRate.toFixed(1)}%</span>
                            </div>
                        </div>
                        <div class="staff-cards">
                            ${sortedSalaries.map(s => `
                                <div class="staff-card">
                                    <div class="staff-header">
                                        <div>
                                            <div class="staff-name">${s.name}</div>
                                            <div class="staff-position">${s.position}</div>
                                        </div>
                                        <div class="staff-sales">æƒ³å®š: ${(s.newSales/10000).toFixed(1)}ä¸‡å††</div>
                                    </div>
                                    <div class="salary-grid">
                                        <div class="salary-item"><span class="salary-label">ç¾åœ¨å®Ÿç¸¾</span><span class="salary-value">${(s.currentSales/10000).toFixed(1)}ä¸‡</span></div>
                                        <div class="salary-item"><span class="salary-label">åŸºæœ¬çµ¦</span><span class="salary-value">${(s.baseSalary/10000).toFixed(1)}ä¸‡</span></div>
                                        <div class="salary-item"><span class="salary-label">åº—èˆ—æ‰‹å½“</span><span class="salary-value">${(s.storeSalesAllowance/10000).toFixed(1)}ä¸‡</span></div>
                                        <div class="salary-item" style="background: #fecaca;"><span class="salary-label" style="color: #dc2626;">åŠ ç®—é¡</span><span class="salary-value" style="color: #dc2626; font-size: 11px; font-weight: 700;">${(s.increaseSales/10000).toFixed(1)}ä¸‡</span></div>
                                        <div class="salary-item"><span class="salary-label">å½¹è·çµ¦</span><span class="salary-value">è¾¼</span></div>
                                        <div class="salary-item"><span class="salary-label">å€‹äººæ‰‹å½“</span><span class="salary-value">${(s.personalAllowance/10000).toFixed(1)}ä¸‡</span></div>
                                        <div class="salary-item" style="background: #ccfbf1;"><span class="salary-label" style="color: #0f766e;">å€‹äººç›®æ¨™</span><span class="salary-value" style="color: #0d9488; font-size: 11px; font-weight: 700;">${(s.newSales/10000).toFixed(1)}ä¸‡</span></div>
                                        <div class="salary-item"><span class="salary-label">é”æˆæ‰‹å½“</span><span class="salary-value">${(s.achievementAllowance/10000).toFixed(1)}ä¸‡</span></div>
                                        <div class="salary-item"><span class="salary-label">ãã®ä»–</span><span class="salary-value">0ä¸‡</span></div>
                                        <div class="salary-item salary-total"><span class="salary-label">æ”¯çµ¦åˆè¨ˆ</span><span class="salary-value">${(s.total/10000).toFixed(1)}ä¸‡</span></div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // Enterã‚­ãƒ¼ã§è¨ˆç®—å®Ÿè¡Œ
        document.getElementById('targetSales').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && selectedStores.length === 2) {
                execute();
            }
        });
        
        // å…¥åŠ›æ™‚ã«ãƒœã‚¿ãƒ³æœ‰åŠ¹åŒ–
        document.getElementById('targetSales').addEventListener('input', function() {
            if (selectedStores.length === 2 && this.value) {
                document.getElementById('executeBtn').disabled = false;
            }
        });
        
        // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
            cb.addEventListener('change', updateSelection);
        });
    </script>
</body>
</html>
